# DOC-LINK 프로젝트 구현 계획서

## 전체 개요
- **데이터베이스**: Supabase (PostgreSQL)
- **검증 도구**: Playwright
- **진행 방식**: 페이지별 순차 구현 및 검증

---

## Phase 1: 데이터베이스 스키마 설계 및 기본 설정

### 1.1 Supabase 프로젝트 초기 설정
- [ ] Supabase 프로젝트 생성 및 연결
- [ ] 환경 변수 설정 파일 생성
- [ ] Supabase 클라이언트 초기화 (js/supabase.js)

### 1.2 데이터베이스 테이블 생성
- [ ] profiles 테이블 (사용자 기본 정보)
- [ ] doctor_profiles 테이블 (의사 상세 정보)
- [ ] hospital_profiles 테이블 (병원 상세 정보)
- [ ] shifts 테이블 (대진 일정)
- [ ] applications 테이블 (신청 내역)
- [ ] change_requests 테이블 (일정 변경 요청)
- [ ] RLS (Row Level Security) 정책 설정

### 1.3 검증 (Playwright)
- [ ] 데이터베이스 연결 테스트
- [ ] 테이블 생성 확인

---

## Phase 2: 인증 시스템 (login.html, signup.html)

### 2.1 로그인 페이지 (login.html)
- [ ] Supabase Auth 연동
- [ ] 의사/병원 구분 로그인
- [ ] 이메일/비밀번호 유효성 검사
- [ ] 로그인 성공 시 세션 관리
- [ ] 로그인 실패 시 에러 메시지 표시
- [ ] "기억하기" 기능 (localStorage)
- [ ] 자동 로그인 처리 (세션 확인)

**검증 항목:**
- [ ] 의사 계정 로그인 성공
- [ ] 병원 계정 로그인 성공
- [ ] 잘못된 비밀번호 에러 처리
- [ ] 존재하지 않는 계정 에러 처리
- [ ] 로그인 후 올바른 대시보드로 리다이렉트

### 2.2 회원가입 페이지 (signup.html)
- [ ] Supabase Auth로 계정 생성
- [ ] 사용자 유형 선택 (의사/병원)
- [ ] 이메일 중복 체크
- [ ] 비밀번호 강도 검증
- [ ] 기본 프로필 데이터 생성 (profiles 테이블)
- [ ] 사용자 유형별 상세 프로필 초기화
- [ ] 이메일 인증 안내

**검증 항목:**
- [ ] 의사 회원가입 완료
- [ ] 병원 회원가입 완료
- [ ] 중복 이메일 체크
- [ ] 약한 비밀번호 검증
- [ ] 회원가입 후 프로필 생성 확인

---

## Phase 3: 의사 대시보드 (doctor-dashboard.html)

### 3.1 캘린더 뷰 구현
- [ ] 월간 캘린더 렌더링 (Supabase 데이터 연동)
- [ ] 날짜별 일정 표시 (확정/대기/신청함)
- [ ] 날짜 클릭 시 타임라인 페이지 이동
- [ ] 이전/다음 월 이동
- [ ] 오늘 날짜 하이라이트
- [ ] 통계 데이터 표시 (확정/대기/신청함 건수)

### 3.2 일정 등록 기능
- [ ] 일정 등록 모달 표시
- [ ] 날짜/시간 입력 (30분 단위)
- [ ] 일정 유형 선택 (확정/대기/신청함)
- [ ] Supabase에 일정 데이터 저장
- [ ] 등록 후 캘린더 갱신

### 3.3 일정 조회 기능
- [ ] 본인 일정만 조회 (RLS 적용)
- [ ] 상태별 필터링 (확정/대기/신청함)
- [ ] 일정 클릭 시 상세 정보 표시

**검증 항목:**
- [ ] 캘린더에 일정 표시 확인
- [ ] 일정 등록 성공
- [ ] 일정 수정 가능
- [ ] 일정 삭제 가능
- [ ] 다른 의사 일정 접근 불가 (보안)

---

## Phase 4: 병원 대시보드 (hospital-dashboard.html)

### 4.1 통합 캘린더 뷰
- [ ] 모든 의사 일정 통합 표시
- [ ] 의사별 필터링 기능
- [ ] 상태별 색상 구분 (확정/대기/모집중/미결)
- [ ] 날짜 클릭 시 타임라인 페이지 이동
- [ ] 통계 데이터 표시

### 4.2 전체 그리드 뷰
- [ ] 시간×날짜 그리드 테이블 생성
- [ ] 의사별 일정 시간대별 표시
- [ ] 미결 상태(3일 이내) 연두색 음영 표시
- [ ] 미결 상태 알람 효과 (펄스 애니메이션)
- [ ] 셀 클릭 시 일정 상세 모달
- [ ] 빈 셀 클릭 시 일정 등록

### 4.3 대진 등록 기능
- [ ] 제안하기 방식 (의사 자원 모집)
- [ ] 직접 배정 방식 (의사 선택)
- [ ] 날짜/시간 입력 (30분 단위)
- [ ] 진료과목 선택
- [ ] 중복 부킹 체크 (동일 시간대 다른 일정 확인)
- [ ] Supabase에 대진 데이터 저장

### 4.4 대진 관리 기능
- [ ] 모집 중: 등록된 대진 목록
- [ ] 신청 의사: 신청한 의사 목록 및 승인/거절
- [ ] 확정됨: 확정된 대진 목록
- [ ] 완료: 완료된 대진 목록

### 4.5 변경 요청 관리
- [ ] 의사 간 일정 변경 요청 목록
- [ ] 변경 요청 상세 정보 표시
- [ ] 승인/거절 기능
- [ ] 중복 부킹 체크 후 승인

**검증 항목:**
- [ ] 모든 의사 일정 통합 표시
- [ ] 대진 등록 성공 (제안하기/직접 배정)
- [ ] 의사 신청 승인/거절
- [ ] 미결 일정 알람 표시
- [ ] 일정 변경 요청 승인
- [ ] 중복 부킹 방지 작동

---

## Phase 5: 프로필 관리 (doctor-profile.html, hospital-profile.html)

### 5.1 의사 프로필 (doctor-profile.html)
- [ ] 기본 정보 수정 (이름, 이메일, 전화번호)
- [ ] 면허번호 등록 및 검증
- [ ] 전문과목 선택
- [ ] 경력 입력
- [ ] 자기소개 입력
- [ ] 근무 가능 지역 관리 (추가/삭제)
- [ ] 근무 가능 시간 설정 (요일별, 30분 단위)
- [ ] 프로필 데이터 Supabase 저장
- [ ] 프로필 이미지 업로드 (Supabase Storage)

**검증 항목:**
- [ ] 프로필 정보 수정 및 저장
- [ ] 근무 가능 지역 추가/삭제
- [ ] 근무 시간 설정 저장
- [ ] 프로필 이미지 업로드
- [ ] 데이터 수정 후 반영 확인

### 5.2 병원 프로필 (hospital-profile.html)
- [ ] 병원명 수정
- [ ] 주소 입력
- [ ] 전화번호 수정
- [ ] 담당자 정보 입력
- [ ] 진료과목 관리 (추가/삭제)
- [ ] 병원 소개 입력
- [ ] 프로필 데이터 Supabase 저장
- [ ] 병원 로고 업로드 (Supabase Storage)

**검증 항목:**
- [ ] 병원 정보 수정 및 저장
- [ ] 진료과목 관리
- [ ] 로고 업로드
- [ ] 데이터 수정 후 반영 확인

---

## Phase 6: 스케줄 관리 (schedule.html, schedule-timeline.html)

### 6.1 스케줄 관리 페이지 (schedule.html)
- [ ] 캘린더 뷰와 타임라인 뷰 전환
- [ ] 월간 캘린더 표시
- [ ] 일정 클릭 시 상세 정보
- [ ] 일정 추가 기능

### 6.2 시간별 타임라인 (schedule-timeline.html)
- [ ] 30분 단위 타임라인 표시 (00:00~23:30)
- [ ] 날짜별 일정 표시
- [ ] 시간대별 일정 추가
- [ ] 이전/다음 날 이동
- [ ] Supabase 실시간 구독 (일정 변경 시 자동 갱신)

**검증 항목:**
- [ ] 타임라인에 일정 표시
- [ ] 시간대별 일정 추가
- [ ] 날짜 이동 기능
- [ ] 실시간 업데이트 확인

---

## Phase 7: 대진 관련 페이지

### 7.1 대진 등록 (shift-register.html)
- [ ] 등록 방식 선택 (제안하기/직접 배정)
- [ ] 날짜/시간 입력 (30분 단위)
- [ ] 진료과목 선택
- [ ] 상세 설명 입력
- [ ] 의사 선택 (직접 배정 시)
- [ ] 중복 부킹 체크
- [ ] Supabase에 대진 저장
- [ ] 등록 완료 후 대시보드 이동

**검증 항목:**
- [ ] 제안하기 방식 등록
- [ ] 직접 배정 방식 등록
- [ ] 중복 부킹 체크 작동
- [ ] 등록 성공 후 리다이렉트

### 7.2 대진 신청 (shift-apply.html)
- [ ] 대진 상세 정보 표시
- [ ] 병원 정보 표시
- [ ] 필수 자격 요건 확인
- [ ] 신청하기 버튼
- [ ] 중복 근무 체크 (본인 일정 확인)
- [ ] Supabase에 신청 데이터 저장
- [ ] 신청 완료 알림

**검증 항목:**
- [ ] 대진 정보 정확히 표시
- [ ] 신청 성공
- [ ] 중복 근무 시 경고
- [ ] 신청 후 상태 변경 확인

### 7.3 대진 상세 (shift-detail.html)
- [ ] 대진 기본 정보 표시
- [ ] 신청한 의사 목록 표시
- [ ] 의사 프로필 미리보기
- [ ] 의사 선택 및 확정
- [ ] 의사 거절 기능
- [ ] 중복 부킹 체크
- [ ] 확정 후 알림 발송

**검증 항목:**
- [ ] 신청 의사 목록 표시
- [ ] 의사 선택 및 확정
- [ ] 중복 부킹 체크
- [ ] 확정 후 상태 변경

---

## Phase 8: 병원 타임라인 (hospital-timeline.html)

### 8.1 전체 의사 시간별 일정
- [ ] 의사별 타임라인 그리드
- [ ] 30분 단위 시간대 표시
- [ ] 상태별 색상 구분
- [ ] 중복 부킹 경고 표시
- [ ] 날짜별 탐색 (이전/다음/오늘)
- [ ] Supabase 실시간 구독

**검증 항목:**
- [ ] 모든 의사 일정 표시
- [ ] 시간대별 정확한 표시
- [ ] 중복 부킹 경고
- [ ] 실시간 업데이트

---

## Phase 9: 실시간 기능 및 알림

### 9.1 실시간 업데이트
- [ ] Supabase Realtime 구독 설정
- [ ] 일정 변경 시 자동 갱신
- [ ] 신청 상태 변경 시 알림
- [ ] 확정 알림

### 9.2 알림 시스템
- [ ] 미결 일정 알림 (3일 이내)
- [ ] 신청 승인/거절 알림
- [ ] 일정 변경 요청 알림
- [ ] 알림 배지 표시

**검증 항목:**
- [ ] 실시간 일정 업데이트 확인
- [ ] 알림 정확히 표시
- [ ] 알림 클릭 시 해당 페이지 이동

---

## Phase 10: 최종 통합 테스트

### 10.1 사용자 플로우 테스트
- [ ] 회원가입 → 로그인 → 프로필 설정
- [ ] 의사: 대진 신청 → 승인 대기 → 확정
- [ ] 병원: 대진 등록 → 의사 선택 → 확정
- [ ] 일정 변경 요청 플로우

### 10.2 보안 테스트
- [ ] RLS 정책 검증 (다른 사용자 데이터 접근 불가)
- [ ] 권한 분리 확인 (의사/병원)
- [ ] 인증 토큰 검증

### 10.3 성능 테스트
- [ ] 대량 데이터 처리
- [ ] 실시간 업데이트 성능
- [ ] 모바일 반응형 검증

---

## 기술 스택
- **Frontend**: HTML5, CSS3, JavaScript (Vanilla)
- **Backend**: Supabase (PostgreSQL, Auth, Realtime, Storage)
- **검증**: Playwright
- **배포**: Vercel

---

## 진행 순서
1. Phase 1: 데이터베이스 스키마
2. Phase 2: 인증 시스템
3. Phase 3: 의사 대시보드
4. Phase 4: 병원 대시보드
5. Phase 5: 프로필 관리
6. Phase 6: 스케줄 관리
7. Phase 7: 대진 관련 페이지
8. Phase 8: 병원 타임라인
9. Phase 9: 실시간 기능
10. Phase 10: 최종 통합 테스트

각 Phase 완료 후 Playwright로 검증 후 다음 Phase 진행
